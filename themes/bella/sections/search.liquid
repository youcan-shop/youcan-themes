{{ 'section.search.css' | asset_url | stylesheet_tag }}

<div
  ui-section="search"
  {% if section.settings.override_global_colors %}
    style="
      --brand-hue: {{ section.settings.main_color.hue }};
      --brand-saturation: {{ section.settings.main_color.saturation }}%;
      --brand-lightness: {{ section.settings.main_color.lightness }}%;
    "
    data-scoped-color
    data-intensity="{{ section.settings.color_intensity }}"
  {% endif %}
  data-top-spacing="{{ section.settings.top_spacing }}"
  data-bottom-spacing="{{ section.settings.bottom_spacing }}"
>
  {% paginate search.products by 24 cod %}
    <div ui-slot="head">
      <h1 class="subheading">Search</h1>
      <form action="/search" class="search">
        <fieldset ui-slot="input-wrapper" data-size="lg" role="group">
          <i ui-slot="input-icon" class="hgi hgi-stroke hgi-search-01"></i>
          <input
            ui-search="clear"
            ui-slot="input"
            name="q"
            type="text"
            value="{{ terms | escape }}"
            placeholder="{{ 'search.drawer.placeholder' | t }}"
          >
          <button
            ui-slot="input-inline-button"
            type="button"
            aria-label="Clear"
            onclick="document.querySelector('[ui-search=\'clear\']').value = ''"
          >
            {% render 'misc.icon', name: 'hgi-cancel-01' %}
          </button>
        </fieldset>
      </form>
    </div>
    <div class="controller">
      <h4 class="result">{{ items.size }} Products</h4>
      <div class="sort">
        <label for="sort">Sort by:</label>
        {% render 'misc.sort', url: previous_page %}
      </div>
    </div>
    {% if items.size > 0 %}
      <ul class="list" data-nbr-columns-desktop="{{ section.settings.nbr_columns_desktop }}">
        {% for product in items %}
          {% render 'block.product', product: product %}
        {% endfor %}
      </ul>

      {% render 'misc.pagination', next_page_url: next_page, previous_page_url: previous_page, current: current, last: last, terms: terms %}

    {% else %}
      {% assign empty_content = 'search.empty.title' | t %}
      {% render 'misc.empty', heading: empty_content %}
    {% endif %}
  {% endpaginate %}
</div>

{% schema %}
{
  "label": "Search",
  "templates": ["search"],
  "limit": 1,
  "settings": [
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "main_color",
      "label": "Main Color",
      "default": "#121212"
    },
    {
      "type": "select",
      "id": "color_intensity",
      "label": "Color Intensity",
      "options": [
        { "label": "As Solid Background", "value": "as-solid-bg" },
        { "label": "As Light Background", "value": "as-light-bg" },
        { "label": "As Foreground", "value": "as-foreground" }
      ],
      "default": "as-foreground"
    },
    {
      "type": "checkbox",
      "id": "override_global_colors",
      "label": "Override global colors",
      "default": false
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "nbr_columns_desktop",
      "label": "Number of columns on Desktop",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 4
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "top_spacing",
      "label": "Top Spacing",
      "min": 0,
      "max": 64,
      "step": 4,
      "unit": "px",
      "default": 64
    },
    {
      "type": "range",
      "id": "bottom_spacing",
      "label": "Bottom Spacing",
      "min": 0,
      "max": 64,
      "step": 4,
      "unit": "px",
      "default": 64
    }
  ]
}
{% endschema %}
