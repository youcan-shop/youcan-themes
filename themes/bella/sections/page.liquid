{{ 'section.page.css' | asset_url | stylesheet_tag }}

<div
  ui-section="page"
  {% if section.settings.override_global_colors %}
    style="
      --brand-hue: {{ section.settings.main_color.hue }};
      --brand-saturation: {{ section.settings.main_color.saturation }}%;
      --brand-lightness: {{ section.settings.main_color.lightness }}%;
    "
    data-scoped-color
    data-intensity="{{ section.settings.color_intensity }}"
  {% endif %}
  data-top-spacing="{{ section.settings.top_spacing }}"
  data-bottom-spacing="{{ section.settings.bottom_spacing }}"
>
  <div ui-slot="head">
    <h1 class="subheading">
      {% if page.template == 'contact' %}
        Contact Us
      {% else %}
        {{ page.name }}
      {% endif %}
    </h1>
  </div>
  {% if page.template == 'contact' %}
    {% form 'contact' %}
      {% if form.posted_successfully %}
        <div ui-slot="alert" data-variant="lighter" data-status="success" data-size="md">
          {% render 'misc.icon', name: 'hgi-checkmark-circle-02' %}
          <span>{{ 'contact.success_message' | t }}</span>
        </div>
      {% elsif form.errors %}
        <div ui-slot="alert" data-variant="lighter" data-status="error" data-size="md">
          {% render 'misc.icon', name: 'hgi-alert-02' %}
          <span>{{ 'contact.error_message' | t }}</span>
        </div>
        <ul class="errors">
          {% for error in form.errors %}
            {% assign message = error[1] %}
            <li>
              <span ui-slot="hint" aria-invalid="true">{{ message }}</span>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
      <div class="fields">
        <fieldset>
          <label ui-slot="label" for="email">{{ 'contact.fields.email' | t }}</label>
          <input
            ui-slot="input"
            data-size="lg"
            id="email"
            name="email"
            type="email"
            placeholder="{{ 'contact.fields.email' | t }}"
            required
          >
        </fieldset>
        <fieldset>
          <label ui-slot="label" for="subject">{{ 'contact.fields.subject' | t }}</label>
          <input
            ui-slot="input"
            data-size="lg"
            id="subject"
            name="subject"
            type="text"
            placeholder="{{ 'contact.fields.subject' | t }}"
            required
          >
        </fieldset>
        <fieldset>
          <label ui-slot="label" for="message">{{ 'contact.fields.message' | t }}</label>
          <textarea
            ui-slot="textarea"
            type="text"
            id="message"
            name="message"
            minlength="5"
            rows="8"
            placeholder="{{ 'contact.fields.message' | t }}"
            required
          ></textarea>
        </fieldset>
      </div>
      <button type="submit" ui-slot="button" data-variant="primary" data-mode="filled" data-size="md">
        {{ 'contact.action' | t }}
      </button>
    {% endform %}
  {% else %}
    {{ page.content }}
  {% endif %}
</div>

{% schema %}
{
  "label": "Page",
  "templates": ["page"],
  "limit": 1,
  "settings": [
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "main_color",
      "label": "Main Color",
      "default": "#121212"
    },
    {
      "type": "select",
      "id": "color_intensity",
      "label": "Color Intensity",
      "options": [
        { "label": "As Solid Background", "value": "as-solid-bg" },
        { "label": "As Light Background", "value": "as-light-bg" },
        { "label": "As Foreground", "value": "as-foreground" }
      ],
      "default": "as-foreground"
    },
    {
      "type": "checkbox",
      "id": "override_global_colors",
      "label": "Override global colors",
      "default": false
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "top_spacing",
      "label": "Top Spacing",
      "min": 0,
      "max": 64,
      "step": 4,
      "unit": "px",
      "default": 64
    },
    {
      "type": "range",
      "id": "bottom_spacing",
      "label": "Bottom Spacing",
      "min": 0,
      "max": 64,
      "step": 4,
      "unit": "px",
      "default": 64
    }
  ]
}
{% endschema %}
